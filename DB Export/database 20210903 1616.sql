--
-- Script was generated by Devart dbForge Studio 2019 for MySQL, Version 8.2.23.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 03.09.2021 16:16:54
-- Server version: 5.7.25
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE `task db`;

--
-- Drop table `handout`
--
DROP TABLE IF EXISTS handout;

--
-- Drop table `students`
--
DROP TABLE IF EXISTS students;

--
-- Drop table `book`
--
DROP TABLE IF EXISTS book;

--
-- Drop table `author`
--
DROP TABLE IF EXISTS author;

--
-- Drop table `vendor`
--
DROP TABLE IF EXISTS vendor;

--
-- Set default database
--
USE `task db`;

--
-- Create table `vendor`
--
CREATE TABLE vendor (
  VendorID INT(11) NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) NOT NULL,
  PRIMARY KEY (VendorID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `author`
--
CREATE TABLE author (
  AuthorID INT(11) NOT NULL AUTO_INCREMENT,
  FirstName VARCHAR(255) NOT NULL,
  LastName VARCHAR(255) NOT NULL,
  MiddleName VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (AuthorID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `book`
--
CREATE TABLE book (
  id INT(11) NOT NULL AUTO_INCREMENT,
  Name VARCHAR(50) DEFAULT NULL,
  AuthorID INT(11) DEFAULT NULL,
  VendorID INT(11) DEFAULT NULL,
  Year DATE DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 5461,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE book 
  ADD CONSTRAINT FK_book_AuthorID FOREIGN KEY (AuthorID)
    REFERENCES author(AuthorID) ON DELETE SET NULL;

--
-- Create foreign key
--
ALTER TABLE book 
  ADD CONSTRAINT FK_book_VendorID FOREIGN KEY (VendorID)
    REFERENCES vendor(VendorID) ON DELETE NO ACTION;

--
-- Create table `students`
--
CREATE TABLE students (
  StudentID INT(11) NOT NULL AUTO_INCREMENT,
  Firstname VARCHAR(255) NOT NULL,
  LastName VARCHAR(255) NOT NULL,
  MiddleName VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (StudentID)
)
ENGINE = INNODB,
AUTO_INCREMENT = 4,
AVG_ROW_LENGTH = 8192,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create table `handout`
--
CREATE TABLE handout (
  id INT(11) NOT NULL AUTO_INCREMENT,
  StudentID INT(11) DEFAULT NULL,
  TakenAT DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  ReturnedAT DATETIME DEFAULT NULL,
  BookID INT(11) NOT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 7,
AVG_ROW_LENGTH = 3276,
CHARACTER SET utf8,
COLLATE utf8_general_ci;

--
-- Create foreign key
--
ALTER TABLE handout 
  ADD CONSTRAINT FK_handout_BookID FOREIGN KEY (BookID)
    REFERENCES book(id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE handout 
  ADD CONSTRAINT FK_handout_StudentID FOREIGN KEY (StudentID)
    REFERENCES students(StudentID) ON DELETE NO ACTION;

-- 
-- Dumping data for table vendor
--
INSERT INTO vendor VALUES
(1, 'VA'),
(2, 'VB'),
(3, 'VC');

-- 
-- Dumping data for table author
--
INSERT INTO author VALUES
(1, 'A', 'A', 'A'),
(2, 'B', 'B', 'B'),
(3, 'C', 'C', 'C');

-- 
-- Dumping data for table students
--
INSERT INTO students VALUES
(1, 'SA', 'SA', 'SA'),
(2, 'SB', 'SB', 'SB'),
(3, 'SC', 'SC', 'SC');

-- 
-- Dumping data for table book
--
INSERT INTO book VALUES
(1, 'B_A', 1, 1, '2001-01-20'),
(2, 'B_B', 1, 1, '2021-08-20'),
(3, 'B_A', 1, 2, '2019-01-13');

-- 
-- Dumping data for table handout
--
INSERT INTO handout VALUES
(1, 1, '2021-08-03 16:45:07', '2021-08-31 00:00:00', 1),
(2, 1, '2021-08-04 00:00:00', NULL, 2),
(3, 2, '2021-07-15 00:00:00', '2021-08-03 00:00:00', 1),
(4, 1, '2019-08-03 00:00:00', '2019-08-03 00:00:00', 3),
(5, 1, '2021-08-31 00:00:00', NULL, 1),
(6, 3, '2021-08-03 00:00:00', '2021-08-03 00:00:00', 2);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;